var RC;!function(e,t){var o={host:""};RC=function(e,a){function n(t){e&&a?d(v,a,function(e){e.type==a&&(t&&"boolean"==typeof t?localStorage.removeItem("rc_config"):t&&"string"==typeof t&&localStorage.removeItem(t))}):t&&"boolean"==typeof t?(localStorage.removeItem("rc_config"),o={}):t&&"string"==typeof t&&localStorage.removeItem(t)}function r(e){return o[e]||o}function c(e,t,a){"object"==typeof e?o=s(e,o):o[e]=t,a&&localStorage.setItem("rc_config",JSON.stringify(o))}function l(t,n,r){"function"==typeof n&&(r=n,n=""),e&&a?d(v,a,function(e){e.type==a&&m({method:"get",url:o.host+t,data:p(n),callback:r,header:o.header}).then(b,g)}):m({method:"get",url:o.host+t,data:p(n),callback:r,header:o.header}).then(b,g)}function u(t,n,r){"function"==typeof n&&(r=n,n=""),e&&a?d(v,a,function(e){e.type==a&&m({method:"post",url:o.host+t,data:p(n),callback:r,header:o.header}).then(b,g)}):m({method:"post",url:o.host+t,data:p(n),callback:r,header:o.header}).then(b,g)}function i(t,n,r){"function"==typeof n&&(r=n,n=""),e&&a?d(v,a,function(e){e.type==a&&m({method:"put",url:o.host+t,data:p(n),callback:r,header:o.header}).then(b,g)}):m({method:"put",url:o.host+t,data:p(n),callback:r,header:o.header}).then(b,g)}function h(t,n,r){"function"==typeof n&&(r=n,n=""),e&&a?d(v,a,function(e){e.type==a&&m({method:"patch",url:o.host+t,data:p(n),callback:r,header:o.header}).then(b,g)}):m({method:"patch",url:o.host+t,data:p(n),callback:r,header:o.header}).then(b,g)}function f(t,n,r){"function"==typeof n&&(r=n,n=""),e&&a?d(v,a,function(e){e.type==a&&m({method:"delete",url:o.host+t,data:p(n),callback:r,header:o.header}).then(b,g)}):m({method:"delete",url:o.host+t,data:p(n),callback:r,header:o.header}).then(b,g)}function d(e,t,o){t&&e&&e.addEventListener(t,function(e){o(e)})}function s(e,t){return"object"==typeof e&&"object"==typeof t&&Object.keys(e).forEach(function(o){"object"==typeof e[o]?s(e[o],t[o]):t[o]=e[o]}),t}function p(e){var o=[],a="";if("object"==typeof e)Object.keys(e).forEach(function(a){var n=!1;if((e[a].indexOf(".")>-1||e[a].indexOf("#")>-1||e[a].indexOf("[")>-1)&&(n=e[a]),n){var r=t.querySelector(n);r&&o.push(a+"="+r.value)}else o.push(a+"="+e[a])}),a=o.join("&");else if("string"==typeof e&&e){var n=v;a=y(n)}return a}function y(e){var o=[],a=0,n=["input","select","textarea"];"string"==typeof e&&(e=t.querySelector(e));var r=e.querySelectorAll(n.join(","));if(r){for(a in r){var c=r[a];if(c.value){var l=c.name||"field"+ ++a,u=c.value;if("input"!=c.localName||"radio"!=c.type&&"checkbox"!=c.type||!c.checked||o.push(l+"="+u),"select"==c.localName){var i=c.querySelectorAll("option");i.forEach(function(e){e.selected&&(c.hasAttribute("multiple")&&l.indexOf("[")==-1&&(l+="[]"),o.push(l+"="+e.value))})}"text"!=c.type&&"textarea"!=c.type||o.push(l+"="+u)}}return o.join("&")}return""}function m(e){return new Promise(function(t,o){var a=e;a.method=e.method||"post",a.url=e.url||"",a.data=e.data||"",a.callback=e.callback||!1,a.header=e.header||!1;var n=a.data;"get"==a.method.toLowerCase()&&(a.url=a.url+"?"+n);var r=new XMLHttpRequest;return r.open(a.method,a.url,!0),"get"!=a.method.toLowerCase()&&r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.header&&Object.keys(a.header).forEach(function(e){"withCredentials"==e&&(r.withCredentials=!0),r.setRequestHeader(e,a.header[e])}),r.onload=function(a){obj=a.target,obj.options=e,200==obj.status?t(obj):o(obj)},r.onerror=function(t){t.options=e,o(t)},r.send(n),r})}function b(e){e.options.callback&&e.options.callback(e.responseText,e.status,e.statusText)}function g(e){console.log(e)}var v;return e&&(v=t.querySelector(e)),localStorage.getItem("rc_config")&&(o=JSON.parse(localStorage.getItem("rc_config"))),{get:l,post:u,put:i,patch:h,"delete":f,clearSess:n,getConfig:r,setConfig:c}}}(window,document);