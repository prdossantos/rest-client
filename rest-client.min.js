var RC;!function(e,t){var o={host:""};RC=function(e,a){function r(t){e&&a?h(v,a,function(e){e.type==a&&(t&&"boolean"==typeof t?localStorage.removeItem("rc_config"):t&&"string"==typeof t&&localStorage.removeItem(t))}):t&&"boolean"==typeof t?(localStorage.removeItem("rc_config"),o={}):t&&"string"==typeof t&&localStorage.removeItem(t)}function n(e){return o[e]||o}function c(e,t,a){"object"==typeof e?o=s(e,o):o[e]=t,a&&localStorage.setItem("rc_config",JSON.stringify(o))}function l(t,r,n){"function"==typeof r&&(n=r,r=""),e&&a?h(v,a,function(e){e.type==a&&m({method:"get",url:o.host+t,data:p(r),callback:n,header:o.header}).then(b,g)}):m({method:"get",url:o.host+t,data:p(r),callback:n,header:o.header}).then(b,g)}function u(t,r,n){"function"==typeof r&&(n=r,r=""),e&&a?h(v,a,function(e){e.type==a&&m({method:"post",url:o.host+t,data:p(r),callback:n,header:o.header}).then(b,g)}):m({method:"post",url:o.host+t,data:p(r),callback:n,header:o.header}).then(b,g)}function i(t,r,n){"function"==typeof r&&(n=r,r=""),e&&a?h(v,a,function(e){e.type==a&&m({method:"put",url:o.host+t,data:p(r),callback:n,header:o.header}).then(b,g)}):m({method:"put",url:o.host+t,data:p(r),callback:n,header:o.header}).then(b,g)}function d(t,r,n){"function"==typeof r&&(n=r,r=""),e&&a?h(v,a,function(e){e.type==a&&m({method:"patch",url:o.host+t,data:p(r),callback:n,header:o.header}).then(b,g)}):m({method:"patch",url:o.host+t,data:p(r),callback:n,header:o.header}).then(b,g)}function f(t,r,n){"function"==typeof r&&(n=r,r=""),e&&a?h(v,a,function(e){e.type==a&&m({method:"delete",url:o.host+t,data:p(r),callback:n,header:o.header}).then(b,g)}):m({method:"delete",url:o.host+t,data:p(r),callback:n,header:o.header}).then(b,g)}function h(e,t,o){t&&e&&e.addEventListener(t,function(e){o(e)})}function s(e,t){return"object"==typeof e&&"object"==typeof t&&Object.keys(e).forEach(function(o){"object"==typeof e[o]?s(e[o],t[o]):t[o]=e[o]}),t}function p(e){var o=[],a="";if("object"==typeof e)Object.keys(e).forEach(function(a){var r=!1;if((e[a].indexOf(".")>-1||e[a].indexOf("#")>-1||e[a].indexOf("[")>-1)&&(r=e[a]),r){var n=t.querySelector(r);n&&o.push(a+"="+n.value)}else o.push(a+"="+e[a])}),a=o.join("&");else if("string"==typeof e&&e){var r=v;a=y(r)}return a}function y(e){var o=[],a=0,r=["input","select","textarea"];"string"==typeof e&&(e=t.querySelector(e));var n=e.querySelectorAll(r.join(","));if(n){for(a in n){var c=n[a];if(c.value){var l=c.name||"field"+ ++a,u=c.value;if("input"!=c.localName||"radio"!=c.type&&"checkbox"!=c.type||!c.checked||o.push(l+"="+u),"select"==c.localName){var i=c.querySelectorAll("option");i.forEach(function(e){e.selected&&(c.hasAttribute("multiple")&&l.indexOf("[")==-1&&(l+="[]"),o.push(l+"="+e.value))})}"text"!=c.type&&"textarea"!=c.type||o.push(l+"="+u)}}return o.join("&")}return""}function m(e){return new Promise(function(t,o){var a=e;a.method=e.method||"post",a.url=e.url||"",a.data=e.data||"",a.callback=e.callback||!1,a.header=e.header||!1;var r=a.data;"get"==a.method.toLowerCase()&&(a.url=a.url+"?"+r);var n=new XMLHttpRequest;return n.open(a.method,a.url,!0),"get"!=a.method.toLowerCase()&&n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),(a.url.indexOf("http://")>-1||a.url.indexOf("https://")>-1)&&(n.withCredentials=!0),a.header&&Object.keys(a.header).forEach(function(e){n.setRequestHeader(e,a.header[e])}),n.onload=function(a){obj=a.target,200==obj.status?(obj.options=e,t(obj)):o(Error("Proccess didn't load successfully, error: ("+obj.status+")"+obj.statusText))},n.onerror=function(){o(Error("There was a network error"))},n.send(r),n})}function b(e){e.options.callback&&e.options.callback(e.responseText,e.status,e.statusText)}function g(e){console.log(e)}var v;return e&&(v=t.querySelector(e)),localStorage.getItem("rc_config")&&(o=JSON.parse(localStorage.getItem("rc_config"))),{get:l,post:u,put:i,patch:d,"delete":f,clearSess:r,getConfig:n,setConfig:c}}}(window,document);